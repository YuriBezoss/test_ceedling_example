/**
 * \file
 *
 * Various useful macros
 */

#ifndef _UTIL_MACROS_H
#define _UTIL_MACROS_H

/*******************************************************************************
 *    INCLUDED FILES
 ******************************************************************************/

/*******************************************************************************
 *    PUBLIC TYPES
 ******************************************************************************/

/*******************************************************************************
 *    GLOBAL VARIABLES
 ******************************************************************************/

/*******************************************************************************
 *    DEFINITIONS
 ******************************************************************************/




/***************************************************************************************************
  Useful definitions
 **************************************************************************************************/

#define DFC_SIZEOFMEMBER(s, m)         sizeof(((s *)0)->m)
#define DFC_OFFSETOF(s, m)             (size_t)&(((s *)0)->m)
#define DFC_COUNTOF(a)                 (sizeof(a) / sizeof(*(a)))
#define DFC_ALIGNOF(type)              DFC_OFFSETOF(struct { char c; type member; }, member)



#define DFC_INT_DIV(a, b)              ((a) >= 0 ? (((a) + ((b) >> 1)) / (b)) : (((a) - ((b) >> 1)) / (b)) )
#define DFC_INT_DIV__POS(a, b)         (((a) + ((b) >> 1)) / (b))
#define DFC_INT_DIV__NEG(a, b)         (((a) - ((b) >> 1)) / (b))

#define DFC_UINT_DIV(a, b)             DFC_INT_DIV__POS(a, b)

/**
 * Generates compile-time error if `cond` is zero
 */
#define DFC_STATIC_ASSERT(error_msg, cond)   typedef int error__##error_msg [(cond) ? 1 : -1]; 


/*******************************************************************************
 *    PUBLIC FUNCTION PROTOTYPES
 ******************************************************************************/


#endif // _UTIL_MACROS_H


/*******************************************************************************
 *    end of file
 ******************************************************************************/



